{"version":3,"sources":["components/PersonForm.js","components/Person.js","components/FilteredResult.js","services/persons.js","components/Notification.js","components/ErrorMessage.js","App.js","index.js"],"names":["PersonForm","props","onSubmit","addName","value","newName","onChange","addToName","phone","addPhone","type","Person","person","name","number","onClick","deleteHandler","FilteredResult","persons","filter","filtered","toLowerCase","includes","map","key","id","axios","get","then","response","data","Notification","message","className","ErrorMessage","App","useState","setPersons","setNewName","setPhone","setFilter","notification","setNotification","errorMessage","setErrorMessage","useEffect","servicesPerson","inputField","event","target","preventDefault","nameHolder","window","confirm","nameObject","find","changedNumber","put","setTimeout","catch","error","console","log","newAdd","length","post","addHandler","delete","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c358da8c.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst PersonForm = (props) => (\r\n    <form onSubmit={props.addName}>\r\n        <div>\r\n            name: <input value={props.newName} onChange={props.addToName} /><br/>\r\n            number: <input value={props.phone} onChange={props.addPhone} />\r\n        </div>\r\n        <div>\r\n            <button type=\"submit\">add</button>\r\n        </div>\r\n    </form>\r\n)\r\n\r\nexport default PersonForm;","import React from 'react';\r\n\r\nconst Person = (props) => (\r\n    <div>\r\n       {props.person.name}: {props.person.number} \r\n       <button onClick={props.deleteHandler}>Delete</button>\r\n    </div>\r\n)\r\n    \r\nexport default Person;","import React from 'react';\r\n\r\nconst FilteredResult = ({persons, filter}) => {\r\n    const filtered = persons.filter(person => \r\n                            person.name.toLowerCase().includes(filter.toLowerCase()))\r\n\r\n    const printOut = () => {\r\n        if (filter === '') {\r\n            return null\r\n        }\r\n        else {\r\n            return (\r\n                <ul>\r\n                    {filtered.map(filter => <li key={filter.id} >{filter.name}: {filter.number}</li>)}\r\n                </ul>\r\n            )\r\n        }\r\n    }\r\n\r\n    return (\r\n        printOut()\r\n    )\r\n} \r\n\r\nexport default FilteredResult","import axios from \"axios\";\r\nconst baseUrl = \"/api/persons\";\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst create = (newObject) => {\r\n  const request = axios.post(baseUrl, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nexport default { getAll, create };\r\n","import React from 'react'\r\n\r\nconst Notification = (props) => {\r\n    if (props.message === null) {\r\n      return null\r\n    }\r\n    return(\r\n      <div className=\"notification\">\r\n        Added: {props.message}\r\n      </div>\r\n    )\r\n  }\r\n  \r\nexport default Notification","import React from 'react'\r\n\r\nconst ErrorMessage = (props) => {\r\n    if (props.message === null) {\r\n      return null\r\n    }\r\n    return(\r\n      <div className=\"error\">{props.message}</div>\r\n    )\r\n  }\r\n\r\nexport default ErrorMessage;","import React, { useState, useEffect } from \"react\";\nimport PersonForm from \"./components/PersonForm\";\nimport Person from \"./components/Person\";\nimport FilteredResult from \"./components/FilteredResult\";\nimport servicesPerson from \"./services/persons\";\nimport Notification from \"./components/Notification\";\nimport ErrorMessage from \"./components/ErrorMessage\";\nimport axios from \"axios\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [phone, setPhone] = useState(\"\");\n  const [filter, setFilter] = useState(\"\");\n  const [notification, setNotification] = useState(null);\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  useEffect(() => {\n    servicesPerson.getAll().then((inputField) => {\n      setPersons(inputField);\n    });\n  }, []);\n\n  const addHandler = () => {\n    const newAdd = {\n      name: newName,\n      number: phone,\n      id: persons.length + 1,\n    };\n\n    axios.post(`/api/persons`, newAdd).then((response) => {\n      setPersons([...persons, response.data]);\n      setNotification(newName);\n      setTimeout(() => {\n        setNotification(null);\n      }, 3000);\n      setNewName(\"\");\n      setPhone(\"\");\n    });\n  };\n\n  const addName = (event) => {\n    event.preventDefault();\n    let nameHolder = newName;\n\n    const arrName = persons.map((person) => person.name);\n    const check = arrName.includes(nameHolder);\n    if (check) {\n      const result = window.confirm(\n        `${nameHolder} is already added to the phonebook, replace the old number with a new one?`\n      );\n      if (result) {\n        const nameObject = persons.find((person) => person.name === nameHolder);\n        const changedNumber = { ...nameObject, number: phone };\n\n        axios\n          .put(`/api/persons/${nameObject.id}`, changedNumber)\n          .then((response) => {\n            setNotification(nameHolder);\n            setTimeout(() => {\n              setNotification(null);\n            }, 3000);\n            setPersons(\n              persons.map((person) =>\n                person.name !== nameHolder ? person : response.data\n              )\n            );\n          })\n          .catch((error) => {\n            console.log(error);\n            setErrorMessage(\n              `Details of ${nameHolder} has already been deleted`\n            );\n            setTimeout(() => {\n              setErrorMessage(null);\n            }, 3000);\n            setPersons(persons.filter((person) => person.name !== nameHolder));\n          });\n      } else {\n        return null;\n      }\n    } else {\n      addHandler();\n    }\n  };\n\n  const searchFilter = (event) => {\n    setFilter(event.target.value);\n  };\n\n  const addToName = (event) => {\n    setNewName(event.target.value);\n  };\n\n  const addPhone = (event) => {\n    setPhone(event.target.value);\n  };\n\n  const deleteHandler = (id) => {\n    //console.log(`this id ${id} should be deleted`)\n    const person = persons.find((person) => person.id === id);\n    const result = window.confirm(\n      `Are you sure you want to delete ${person.name}?`\n    );\n    if (result) {\n      axios.delete(`/api/persons/${id}`, person).then((response) => {\n        if (response.data != null) {\n          setPersons(persons.filter((person) => person.id !== id));\n        }\n      });\n    } else {\n      return null;\n    }\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={notification} />\n      <ErrorMessage message={errorMessage} />\n      <input value={filter} onChange={searchFilter} />\n      <FilteredResult persons={persons} filter={filter} />\n      <h3>Add a new</h3>\n      <PersonForm\n        addName={addName}\n        addToName={addToName}\n        addPhone={addPhone}\n        newName={newName}\n        phone={phone}\n      />\n      <h2>Numbers</h2>\n      {persons.map((person) => {\n        return (\n          <Person\n            key={person.id}\n            person={person}\n            deleteHandler={() => deleteHandler(person.id)}\n          />\n        );\n      })}\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n"],"sourceRoot":""}